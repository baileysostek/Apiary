{
  "world":{
    "name":"Conway's Game of Life",
    "type":"AgentGrid2D",
    "arguments":{
      "fragment_logic":["out_color", ["vec4(", "cell", "fragment_index", "color", "@agent_read", ", 1.0)"], "@set"]
    }
  },
  "agents":{
    "cell":{
      "attributes":{
        "color":{
          "type":"vec3",
          "default_value":["@random_float", "@random_float", "@random_float", "@vec3"]
        },
        "alive":{
          "type":"bool",
          "default_value":["@random_float", "0.33", "@greater"]
        }
      }
    }
  },
  "steps":[
    {
      "logic":[
        "int", "neighbors", "0", "@define", 
        ["neighbors", "cell", ["x_pos", "-1", "@add", "y_pos", "-1", "@add", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["neighbors", "cell", ["x_pos", "y_pos", "-1", "@add", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["neighbors", "cell", ["x_pos", "+1", "@add", "y_pos", "-1", "@add", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["neighbors", "cell", ["x_pos", "-1", "@add", "y_pos", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["neighbors", "cell", ["x_pos", "+1", "@add", "y_pos", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["neighbors", "cell", ["x_pos", "-1", "@add", "y_pos", "+1", "@add", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["neighbors", "cell", ["x_pos", "y_pos", "+1", "@add", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["neighbors", "cell", ["x_pos", "+1", "@add", "y_pos", "+1", "@add", "@xy_to_screen_index"], "alive", "@agent_read", "1", "0", "@?", "@increment"],
        ["cell", "fragment_index", "alive", "@agent_read" , ["cell", "fragment_index", "alive", ["neighbors", "2", "@equals", "neighbors", "3", "@equals", "@or"], "@agent_write"], ["cell", "fragment_index", "alive", "neighbors", "3", "@equals", "@agent_write"], "@conditional"],
        ["cell", "fragment_index", "color", [["cell", "fragment_index", "alive", "@agent_read"], ["1.0", "1.0", "1.0", "@vec3"], [["cell", "fragment_index", "color", "@agent_read"], "0.0", "@mul"], "@?"], "@agent_write"]
      ]
    }
  ]
}